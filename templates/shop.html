{% extends "base.html" %} {% block content %}
<div class="bg-gradient-soft min-h-screen pt-24 pb-12">
    <div class="container mx-auto px-6">
        
        <div class="mb-10">
            <h1 class="text-4xl font-bold font-poppins text-slate-900 tracking-tight">Explorar Baterias</h1>
            <p class="text-slate-500">Encontre a energia certa para o seu ve√≠culo entre {{ products|length }} op√ß√µes.</p>
        </div>

        <div class="flex flex-col lg:flex-row gap-8">
            
            <aside class="w-full lg:w-64 flex-shrink-0">
                <div class="glass-card p-6 rounded-[32px] sticky top-28 border border-slate-200 shadow-sm">
                    <form action="/loja" method="GET" id="filter-form">
                        <h3 class="font-bold text-slate-900 mb-6 flex items-center gap-2">
                            <span class="text-blue-600">‚ö°</span> Filtros
                        </h3>

                        <div class="mb-8">
                            <label class="text-xs font-bold uppercase tracking-widest text-slate-400 mb-4 block">Condi√ß√£o</label>
                            <div class="space-y-3">
                                <label class="flex items-center gap-3 cursor-pointer group">
                                    <input type="radio" name="condicao" value="" class="w-4 h-4 text-blue-600 border-slate-300 focus:ring-blue-500" {% if not request.args.get('condicao') %}checked{% endif %}>
                                    <span class="text-sm text-slate-600 group-hover:text-blue-600 transition">Todas</span>
                                </label>
                                <label class="flex items-center gap-3 cursor-pointer group">
                                    <input type="radio" name="condicao" value="nova" class="w-4 h-4 text-blue-600 border-slate-300 focus:ring-blue-500" {% if request.args.get('condicao') == 'nova' %}checked{% endif %}>
                                    <span class="text-sm text-slate-600 group-hover:text-blue-600 transition">Novas</span>
                                </label>
                                <label class="flex items-center gap-3 cursor-pointer group">
                                    <input type="radio" name="condicao" value="recondicionada" class="w-4 h-4 text-blue-600 border-slate-300 focus:ring-blue-500" {% if request.args.get('condicao') == 'recondicionada' %}checked{% endif %}>
                                    <span class="text-sm text-slate-600 group-hover:text-blue-600 transition">Recondicionadas</span>
                                </label>
                            </div>
                        </div>

                        <div class="mb-8">
                            <label class="text-xs font-bold uppercase tracking-widest text-slate-400 mb-4 block">Capacidade (Ah)</label>
                            <select name="amps" onchange="this.form.submit()" class="w-full p-3 rounded-xl border border-slate-200 text-sm focus:ring-2 focus:ring-blue-500 outline-none">
                                <option value="">Qualquer Ah</option>
                                <option value="45" {% if request.args.get('amps') == '45' %}selected{% endif %}>45 Ah</option>
                                <option value="60" {% if request.args.get('amps') == '60' %}selected{% endif %}>60 Ah</option>
                                <option value="70" {% if request.args.get('amps') == '70' %}selected{% endif %}>70 Ah</option>
                            </select>
                        </div>

                        <button type="submit" class="w-full bg-slate-900 text-white py-3 rounded-xl text-sm font-bold hover:bg-blue-600 transition shadow-lg shadow-slate-200">
                            Aplicar Filtros
                        </button>
                        
                        {% if request.args %}
                        <a href="/loja" class="block text-center text-xs text-slate-400 mt-4 hover:text-red-500 underline transition">Limpar tudo</a>
                        {% endif %}
                    </form>
                </div>
            </aside>

            <div class="flex-1">
                {% if products %}
                <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                    {% for p in products %}
                    <div class="group bg-white p-3 rounded-[28px] border border-slate-100 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
                        <div class="bg-slate-50 rounded-[20px] h-40 flex items-center justify-center relative overflow-hidden">
                            <img src="{{ url_for('static', filename='img/' + p.image_url) }}" class="w-24 group-hover:scale-110 transition-transform duration-500">
                            <div class="absolute top-3 right-3">
                                {% if p.is_reconditioned %}
                                <span class="bg-amber-100 text-amber-700 text-[10px] font-black px-2 py-1 rounded-md uppercase">Recond.</span>
                                {% else %}
                                <span class="bg-green-100 text-green-700 text-[10px] font-black px-2 py-1 rounded-md uppercase">Nova</span>
                                {% endif %}
                            </div>
                        </div>
                        <div class="p-4">
                            <h4 class="font-bold text-slate-900 font-poppins">{{ p.brand }} {{ p.amps }}Ah</h4>
                            <p class="text-[11px] text-slate-400 mb-4">Garantia ReVolt Premium</p>
                            
                            <div class="flex items-center justify-between border-t border-slate-50 pt-4">
                                <span class="text-xl font-bold text-slate-900 font-poppins">R$ {{ "%.2f"|format(p.price) }}</span>
                                <a href="/produto/{{ p.id }}" class="text-blue-600 hover:text-blue-700 font-bold text-sm flex items-center gap-1 transition">
                                    Ver Detalhes <span class="text-lg">‚Ä∫</span>
                                </a>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="text-center py-20 bg-white rounded-[40px] border border-slate-100 shadow-inner">
                    <div class="text-6xl mb-4">üîç</div>
                    <h3 class="text-xl font-bold text-slate-800">Nenhum produto encontrado</h3>
                    <p class="text-slate-500">Tente ajustar seus filtros ou buscar por outro termo.</p>
                </div>
                {% endif %}
            </div>

        </div>
    </div>
</div>
{% endblock %}